{"version":3,"sources":["config.js","components/MyNavbar.js","components/auth/Signin.js","components/auth/Signup.js","components/user/PrivateProfile.js","components/home/PublicHome.js","components/home/PrivateHome.js","components/chess/MyMoves.js","components/chess/MyEngineBoard.js","components/chess/MyHumanBoard.js","components/game/PrivateGame.js","components/App.js","index.js"],"names":["API_URL","MyNavbar","props","Nav","className","to","loggedUser","onClick","onLogout","username","Signin","useEffect","onUnmount","onSubmit","onSignin","name","type","errorMsg","style","color","Signup","onSignup","errorMessage","PrivateProfile","games","elo","PublicHome","PrivateHome","Button","size","variant","uuidv4","MyMoves","ListGroup","turn","Item","moves","boardStyle","borderRadius","boxShadow","STOCKFISH","window","game","Chess","HumanVsStockfish","state","fen","history","onDrop","sourceSquare","targetSquare","move","from","promotion","Promise","resolve","setState","then","engineGame","prepareMove","options","announced_game_over","engine","Worker","stockfishjs","evaler","engineStatus","time","wtime","btime","winc","binc","clockTimeoutID","uciCmd","cmd","which","postMessage","clockTick","t","clockColor","startTime","Date","now","setTimeout","get_moves","verbose","i","length","setInterval","game_over","clearTimeout","elapsed","Math","max","stopClock","depth","nodes","onmessage","event","line","data","substr","engineLoaded","engineReady","match","search","score","parseInt","toFixed","abs","start","this","pgn","console","log","children","position","Component","MyEngineBoard","roomId","socket","playerColor","id","width","orientation","HumanVsHuman","useState","setFen","dropSquareStyle","setDropSquareStyle","squareStyles","setSquareStyles","pieceSquare","setHistory","movesPGN","setMovesPGN","setTurn","io","params","emit","on","load_pgn","handleMouseOverSquare","square","squaresToHighlight","push","highlightStyles","reduce","a","c","background","squareStyling","highlightSquare","handleMouseOutSquare","handleDrop","room","handleSquareRightClick","backgroundColor","handleDragOverSquare","MyHumanBoard","onMouseOverSquare","onMouseOutSquare","onSquareRightClick","onDragOverSquare","PrivateGame","path","withRouter","setLoggedUser","setErrorMsg","axios","get","withCredentials","res","handleSignup","e","preventDefault","target","email","password","post","value","catch","err","response","error","handleSignin","handleUnmount","exact","render","routeProps","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f3bcaec2.chunk.js","sourcesContent":["export const API_URL = \"https://ironchess.herokuapp.com/api\";\r\n","// Setup.\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n// Styles.\r\nimport Nav from \"react-bootstrap/Nav\";\r\nimport \"../styles/MyNavbar.css\";\r\n\r\n// Rendering function.\r\nfunction MyNavbar(props) {\r\n  return (\r\n    <Nav className=\"myNav\">\r\n      <Link to=\"/\">IronChess</Link>\r\n      {props.loggedUser ? (\r\n        <>\r\n          <Link onClick={props.onLogout}>Log out</Link>\r\n          <Link to=\"/private\">{props.loggedUser.username}</Link>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Link to=\"/signin\">Sign in</Link>\r\n          <Link to=\"/signup\">Sign up</Link>\r\n        </>\r\n      )}\r\n    </Nav>\r\n  );\r\n}\r\n\r\nexport default MyNavbar;\r\n","/*    Sign in.    */\r\nimport React, { useEffect } from \"react\";\r\n\r\n// Rendering function.\r\nfunction Signin(props) {\r\n  useEffect(() => {\r\n    return props.onUnmount;\r\n  }, []);\r\n\r\n  return (\r\n    <form onSubmit={props.onSignin}>\r\n      <div className=\"form-group\">\r\n        <label>Email address</label>\r\n        <input name=\"email\" type=\"text\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Password</label>\r\n        <input name=\"password\" type=\"password\" />\r\n      </div>\r\n\r\n      <button type=\"submit\">Submit</button>\r\n\r\n      {/*    In case of error.    */}\r\n      {props.errorMsg ? <p style={{ color: \"red\" }}>{props.errorMsg}</p> : null}\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default Signin;\r\n","/*    Sign up.    */\r\nimport React from \"react\";\r\n\r\n// Rendering function.\r\nfunction Signup(props) {\r\n  return (\r\n    <form onSubmit={props.onSignup}>\r\n      <div className=\"form-group\">\r\n        <label>Username</label>\r\n        <input name=\"username\" type=\"text\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Email address</label>\r\n        <input name=\"email\" type=\"text\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Password</label>\r\n        <input name=\"password\" type=\"password\" />\r\n      </div>\r\n\r\n      <button type=\"submit\">Submit</button>\r\n\r\n      {/*    In case of error.    */}\r\n      {props.errorMessage ? (\r\n        <p style={{ color: \"red\" }}>{props.errorMessage}</p>\r\n      ) : null}\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default Signup;\r\n","import React from \"react\";\r\n\r\nfunction PrivateProfile(props) {\r\n  return (\r\n    <div>\r\n      <p>{props.loggedUser.username}</p>\r\n      <p>{props.loggedUser.games}</p>\r\n      <p>{props.loggedUser.elo}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PrivateProfile;\r\n","import React from \"react\";\r\n\r\nfunction PublicHome() {\r\n  return <div>Your're in public home.</div>;\r\n}\r\n\r\nexport default PublicHome;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\n// Styles.\r\nimport { Button } from \"react-bootstrap\";\r\n\r\n// Rendering function.\r\nfunction PrivateHome(props) {\r\n  let color = \"w\";\r\n\r\n  return (\r\n    <div className=\"myPrivateHome\">\r\n      {/* Select time control */}\r\n      <h1>Create a game</h1>\r\n\r\n      <div className=\"myTimeButtons\">\r\n        <Button size=\"lg\" variant=\"dark\">\r\n          <Link to=\"/stockfish\">Stockfish</Link>\r\n        </Button>\r\n\r\n        <Button size=\"lg\" variant=\"light\">\r\n          <Link to={`/game/${uuidv4()}/${color}`}>Timeless</Link>\r\n        </Button>\r\n\r\n        <Button size=\"lg\" variant=\"danger\">\r\n          1 min\r\n        </Button>\r\n\r\n        <Button size=\"lg\" variant=\"warning\">\r\n          3 min\r\n        </Button>\r\n\r\n        <Button size=\"lg\" variant=\"warning\">\r\n          5 min\r\n        </Button>\r\n\r\n        <Button size=\"lg\" variant=\"primary\">\r\n          10 min\r\n        </Button>\r\n\r\n        <Button size=\"lg\" variant=\"primary\">\r\n          15 min\r\n        </Button>\r\n\r\n        <Button size=\"lg\" variant=\"success\">\r\n          60 min\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PrivateHome;\r\n","import React from \"react\";\r\nimport { ListGroup } from \"react-bootstrap\";\r\n\r\nfunction MyMoves(props) {\r\n  return (\r\n    <ListGroup>\r\n      {props.turn === \"w\" ? (\r\n        <ListGroup.Item variant=\"light\">White to move.</ListGroup.Item>\r\n      ) : (\r\n        <ListGroup.Item variant=\"dark\">Black to move.</ListGroup.Item>\r\n      )}\r\n      <ListGroup.Item variant=\"info\">{props.moves}</ListGroup.Item>\r\n    </ListGroup>\r\n  );\r\n}\r\n\r\nexport default MyMoves;\r\n","/*    Human vs. Stockfish    */\r\n\r\n// Setup.\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Chess from \"chess.js\";\r\nimport Chessboard from \"chessboardjsx\";\r\nimport MyMoves from \"./MyMoves\";\r\n\r\n// Styles.\r\nimport \"../../styles/MyBoard.css\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nconst boardStyle = {\r\n  borderRadius: \"5px\",\r\n  boxShadow: `0 5px 15px rgba(0, 0, 0, 0.5)`,\r\n};\r\n\r\nconst STOCKFISH = window.STOCKFISH;\r\n\r\n// Initialising game.\r\nconst game = new Chess();\r\n\r\nclass HumanVsStockfish extends Component {\r\n  static propTypes = { children: PropTypes.func };\r\n\r\n  state = {\r\n    // Starting position.\r\n    fen: \"start\",\r\n    // Array of past game moves.\r\n    history: [],\r\n    // Moves in PNG format.\r\n    moves: \"\",\r\n    // Turn.\r\n    turn: \"\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      fen: game.fen(),\r\n    });\r\n\r\n    this.engineGame().prepareMove();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.moves = game.pgn();\r\n\r\n    if (game.turn() === \"w\") {\r\n      this.turn = \"White to move.\";\r\n    } else {\r\n      this.turn = \"Black to move.\";\r\n    }\r\n    console.log(this.moves);\r\n    console.log(this.turn);\r\n  }\r\n\r\n  onDrop = ({ sourceSquare, targetSquare }) => {\r\n    // see if the move is legal\r\n    const move = game.move({\r\n      from: sourceSquare,\r\n      to: targetSquare,\r\n      promotion: \"q\",\r\n    });\r\n\r\n    // Illegal move\r\n    if (move === null) return;\r\n\r\n    return new Promise((resolve) => {\r\n      this.setState({ fen: game.fen() });\r\n      resolve();\r\n    }).then(() => this.engineGame().prepareMove());\r\n  };\r\n\r\n  engineGame = (options) => {\r\n    options = options || {};\r\n\r\n    /// We can load Stockfish via Web Workers or via STOCKFISH() if loaded from a <script> tag.\r\n    let engine =\r\n      typeof STOCKFISH === \"function\"\r\n        ? STOCKFISH()\r\n        : new Worker(options.stockfishjs || \"stockfish.js\");\r\n    let evaler =\r\n      typeof STOCKFISH === \"function\"\r\n        ? STOCKFISH()\r\n        : new Worker(options.stockfishjs || \"stockfish.js\");\r\n    let engineStatus = {};\r\n    let time = { wtime: 3000, btime: 3000, winc: 1500, binc: 1500 };\r\n    let playerColor = \"black\";\r\n    let clockTimeoutID = null;\r\n    // let isEngineRunning = false;\r\n    let announced_game_over;\r\n    // do not pick up pieces if the game is over\r\n    // only pick up pieces for White\r\n\r\n    setInterval(function () {\r\n      if (announced_game_over) {\r\n        return;\r\n      }\r\n\r\n      if (game.game_over()) {\r\n        announced_game_over = true;\r\n      }\r\n    }, 500);\r\n\r\n    function uciCmd(cmd, which) {\r\n      // console.log('UCI: ' + cmd);\r\n\r\n      (which || engine).postMessage(cmd);\r\n    }\r\n    uciCmd(\"uci\");\r\n\r\n    function clockTick() {\r\n      let t =\r\n        (time.clockColor === \"white\" ? time.wtime : time.btime) +\r\n        time.startTime -\r\n        Date.now();\r\n      let timeToNextSecond = (t % 1000) + 1;\r\n      clockTimeoutID = setTimeout(clockTick, timeToNextSecond);\r\n    }\r\n\r\n    function stopClock() {\r\n      if (clockTimeoutID !== null) {\r\n        clearTimeout(clockTimeoutID);\r\n        clockTimeoutID = null;\r\n      }\r\n      if (time.startTime > 0) {\r\n        let elapsed = Date.now() - time.startTime;\r\n        time.startTime = null;\r\n        if (time.clockColor === \"white\") {\r\n          time.wtime = Math.max(0, time.wtime - elapsed);\r\n        } else {\r\n          time.btime = Math.max(0, time.btime - elapsed);\r\n        }\r\n      }\r\n    }\r\n\r\n    function startClock() {\r\n      if (game.turn() === \"w\") {\r\n        time.wtime += time.winc;\r\n        time.clockColor = \"white\";\r\n      } else {\r\n        time.btime += time.binc;\r\n        time.clockColor = \"black\";\r\n      }\r\n      time.startTime = Date.now();\r\n      clockTick();\r\n    }\r\n\r\n    function get_moves() {\r\n      let moves = \"\";\r\n      let history = game.history({ verbose: true });\r\n\r\n      for (let i = 0; i < history.length; ++i) {\r\n        let move = history[i];\r\n        moves +=\r\n          \" \" + move.from + move.to + (move.promotion ? move.promotion : \"\");\r\n      }\r\n\r\n      return moves;\r\n    }\r\n\r\n    const prepareMove = () => {\r\n      stopClock();\r\n      // this.setState({ fen: game.fen() });\r\n      let turn = game.turn() === \"w\" ? \"white\" : \"black\";\r\n      if (!game.game_over()) {\r\n        // if (turn === playerColor) {\r\n        if (turn !== playerColor) {\r\n          // playerColor = playerColor === 'white' ? 'black' : 'white';\r\n          uciCmd(\"position startpos moves\" + get_moves());\r\n          uciCmd(\"position startpos moves\" + get_moves(), evaler);\r\n          uciCmd(\"eval\", evaler);\r\n\r\n          if (time && time.wtime) {\r\n            uciCmd(\r\n              \"go \" +\r\n                (time.depth ? \"depth \" + time.depth : \"\") +\r\n                \" wtime \" +\r\n                time.wtime +\r\n                \" winc \" +\r\n                time.winc +\r\n                \" btime \" +\r\n                time.btime +\r\n                \" binc \" +\r\n                time.binc\r\n            );\r\n          } else {\r\n            uciCmd(\"go \" + (time.depth ? \"depth \" + time.depth : \"\"));\r\n          }\r\n          // isEngineRunning = true;\r\n        }\r\n        if (game.history().length >= 2 && !time.depth && !time.nodes) {\r\n          startClock();\r\n        }\r\n      }\r\n    };\r\n\r\n    evaler.onmessage = function (event) {\r\n      let line;\r\n\r\n      if (event && typeof event === \"object\") {\r\n        line = event.data;\r\n      } else {\r\n        line = event;\r\n      }\r\n\r\n      // console.log('evaler: ' + line);\r\n\r\n      /// Ignore some output.\r\n      if (\r\n        line === \"uciok\" ||\r\n        line === \"readyok\" ||\r\n        line.substr(0, 11) === \"option name\"\r\n      ) {\r\n        return;\r\n      }\r\n    };\r\n\r\n    engine.onmessage = (event) => {\r\n      let line;\r\n\r\n      if (event && typeof event === \"object\") {\r\n        line = event.data;\r\n      } else {\r\n        line = event;\r\n      }\r\n      // console.log('Reply: ' + line);\r\n      if (line === \"uciok\") {\r\n        engineStatus.engineLoaded = true;\r\n      } else if (line === \"readyok\") {\r\n        engineStatus.engineReady = true;\r\n      } else {\r\n        let match = line.match(/^bestmove ([a-h][1-8])([a-h][1-8])([qrbn])?/);\r\n        /// Did the AI move?\r\n        if (match) {\r\n          // isEngineRunning = false;\r\n          game.move({ from: match[1], to: match[2], promotion: match[3] });\r\n          this.setState({ fen: game.fen() });\r\n          prepareMove();\r\n          uciCmd(\"eval\", evaler);\r\n          //uciCmd(\"eval\");\r\n          /// Is it sending feedback?\r\n        } else if (\r\n          (match = line.match(/^info .*\\bdepth (\\d+) .*\\bnps (\\d+)/))\r\n        ) {\r\n          engineStatus.search = \"Depth: \" + match[1] + \" Nps: \" + match[2];\r\n        }\r\n\r\n        /// Is it sending feed back with a score?\r\n        if ((match = line.match(/^info .*\\bscore (\\w+) (-?\\d+)/))) {\r\n          let score = parseInt(match[2], 10) * (game.turn() === \"w\" ? 1 : -1);\r\n          /// Is it measuring in centipawns?\r\n          if (match[1] === \"cp\") {\r\n            engineStatus.score = (score / 100.0).toFixed(2);\r\n            /// Did it find a mate?\r\n          } else if (match[1] === \"mate\") {\r\n            engineStatus.score = \"Mate in \" + Math.abs(score);\r\n          }\r\n\r\n          /// Is the score bounded?\r\n          if ((match = line.match(/\\b(upper|lower)bound\\b/))) {\r\n            engineStatus.score =\r\n              ((match[1] === \"upper\") === (game.turn() === \"w\")\r\n                ? \"<= \"\r\n                : \">= \") + engineStatus.score;\r\n          }\r\n        }\r\n      }\r\n      // displayStatus();\r\n    };\r\n\r\n    return {\r\n      start: function () {\r\n        uciCmd(\"ucinewgame\");\r\n        uciCmd(\"isready\");\r\n        engineStatus.engineReady = false;\r\n        engineStatus.search = null;\r\n        prepareMove();\r\n        announced_game_over = false;\r\n      },\r\n      prepareMove: function () {\r\n        prepareMove();\r\n      },\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const { fen } = this.state;\r\n    return this.props.children({\r\n      position: fen,\r\n      onDrop: this.onDrop,\r\n      moves: this.moves,\r\n      turn: this.turn,\r\n    });\r\n  }\r\n}\r\n\r\nfunction MyEngineBoard() {\r\n  return (\r\n    <div className=\"myGamespace\">\r\n      <HumanVsStockfish>\r\n        {({ position, onDrop, moves, turn }) => (\r\n          <div className=\"myChessboard\">\r\n            <Chessboard\r\n              id=\"stockfish\"\r\n              position={position}\r\n              width={550}\r\n              onDrop={onDrop}\r\n              boardStyle={boardStyle}\r\n              orientation=\"black\"\r\n            />\r\n\r\n            <MyMoves moves={moves} turn={turn}></MyMoves>\r\n          </div>\r\n        )}\r\n      </HumanVsStockfish>\r\n\r\n      <div className=\"myButtons\">\r\n        <Button>Resign</Button>\r\n        <Button>Offer draw</Button>\r\n        <Button>Save game</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MyEngineBoard;\r\n","/*    Human vs. Human    */\r\n\r\n// Setup.\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Chess from \"chess.js\";\r\nimport Chessboard from \"chessboardjsx\";\r\nimport MyMoves from \"./MyMoves\";\r\nimport io from \"socket.io-client\";\r\n\r\n// Styles.\r\nimport \"../../styles/MyBoard.css\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\n// Variables.\r\nlet roomId;\r\nlet socket;\r\nlet game;\r\nlet playerColor;\r\nconst CONNECTION_PORT = \"https://ironchess.herokuapp.com/api\";\r\n\r\n// Move validation function.\r\nfunction HumanVsHuman(props) {\r\n  // Hooks.\r\n  // const [game, setGame] = useState(null);\r\n  const [fen, setFen] = useState(\"start\");\r\n  const [dropSquareStyle, setDropSquareStyle] = useState({});\r\n  const [squareStyles, setSquareStyles] = useState({});\r\n  const [pieceSquare, setPieceSquare] = useState(\"\");\r\n  const [history, setHistory] = useState([]);\r\n  const [movesPGN, setMovesPGN] = useState(\"\");\r\n  const [turn, setTurn] = useState(\"w\");\r\n\r\n  // componentDidMount.\r\n  useEffect(() => {\r\n    game = Chess();\r\n\r\n    socket = io(CONNECTION_PORT);\r\n    roomId = props.match.params.id;\r\n    playerColor = props.match.params.color;\r\n\r\n    socket.emit(\"join_game\", roomId);\r\n  }, []);\r\n\r\n  // componentDidUpdate.\r\n  useEffect(() => {\r\n    socket.on(\"receive_info\", (data) => {\r\n      console.log(\"Information received.\", data);\r\n\r\n      setFen(data.position);\r\n      setMovesPGN(data.moves);\r\n      setTurn(data.turn);\r\n      game.load_pgn(data.moves);\r\n    });\r\n  });\r\n\r\n  // Keeps clicked square style and removes hint squares.\r\n  const removeHighlightSquare = () => {\r\n    setSquareStyles(squareStyling({ pieceSquare, history }));\r\n  };\r\n\r\n  // Shows possible moves.\r\n  const highlightSquare = (sourceSquare, squaresToHighlight) => {\r\n    const highlightStyles = [sourceSquare, ...squaresToHighlight].reduce(\r\n      (a, c) => {\r\n        return {\r\n          ...a,\r\n          ...{\r\n            [c]: {\r\n              background:\r\n                \"radial-gradient(circle, #fffc00 36%, transparent 40%)\",\r\n              borderRadius: \"50%\",\r\n            },\r\n          },\r\n          ...squareStyling({\r\n            history: history,\r\n            pieceSquare: pieceSquare,\r\n          }),\r\n        };\r\n      },\r\n      {}\r\n    );\r\n\r\n    setSquareStyles({ ...squareStyles, ...highlightStyles });\r\n  };\r\n\r\n  const handleDrop = ({ sourceSquare, targetSquare }) => {\r\n    if (playerColor !== game.turn()) {\r\n      return;\r\n    }\r\n\r\n    let move = game.move({\r\n      from: sourceSquare,\r\n      to: targetSquare,\r\n      promotion: \"q\", // Always promotes to a queen.\r\n    });\r\n\r\n    if (move === null) return;\r\n\r\n    setFen(game.fen());\r\n    setHistory(game.history({ verbose: true }));\r\n    setMovesPGN(game.pgn());\r\n    setTurn(game.turn());\r\n    setSquareStyles(squareStyling({ pieceSquare, history }));\r\n\r\n    socket.emit(\"send_game_info\", {\r\n      room: roomId,\r\n      moves: game.pgn(),\r\n      position: game.fen(),\r\n      turn: game.turn(),\r\n    });\r\n  };\r\n\r\n  const handleMouseOverSquare = (square) => {\r\n    // Gets list of possible moves for this square.\r\n    let moves = game.moves({\r\n      square: square,\r\n      verbose: true,\r\n    });\r\n\r\n    // Exits if there are no moves available for this square.\r\n    if (moves.length === 0) return;\r\n\r\n    let squaresToHighlight = [];\r\n\r\n    for (var i = 0; i < moves.length; i++) {\r\n      squaresToHighlight.push(moves[i].to);\r\n    }\r\n\r\n    highlightSquare(square, squaresToHighlight);\r\n  };\r\n\r\n  const handleMouseOutSquare = (square) => removeHighlightSquare(square);\r\n\r\n  // Central squares get diferents `dropSquareStyles`.\r\n  const handleDragOverSquare = (square) => {\r\n    setDropSquareStyle(\r\n      square === \"e4\" || square === \"d4\" || square === \"e5\" || square === \"d5\"\r\n        ? { backgroundColor: \"cornFlowerBlue\" }\r\n        : { boxShadow: \"inset 0 0 1px 4px rgb(255, 255, 0)\" }\r\n    );\r\n  };\r\n\r\n  const handleSquareRightClick = (square) =>\r\n    setSquareStyles({ [square]: { backgroundColor: \"deepPink\" } });\r\n\r\n  return props.children({\r\n    position: fen,\r\n    handleMouseOverSquare,\r\n    handleMouseOutSquare,\r\n    handleDrop,\r\n    handleSquareRightClick,\r\n    handleDragOverSquare,\r\n    dropSquareStyle,\r\n    squareStyles,\r\n    moves: movesPGN,\r\n    turn,\r\n  });\r\n}\r\n\r\nfunction MyHumanBoard(props) {\r\n  return (\r\n    <HumanVsHuman {...props}>\r\n      {({\r\n        position,\r\n        handleDrop,\r\n        handleMouseOverSquare,\r\n        handleMouseOutSquare,\r\n        handleDragOverSquare,\r\n        handleSquareRightClick,\r\n        squareStyles,\r\n        dropSquareStyle,\r\n        moves,\r\n        turn,\r\n      }) => (\r\n        <div className=\"myChessboard\">\r\n          <Chessboard\r\n            id=\"HumanVsHuman\"\r\n            width={560}\r\n            position={position}\r\n            onDrop={handleDrop}\r\n            onMouseOverSquare={handleMouseOverSquare}\r\n            onMouseOutSquare={handleMouseOutSquare}\r\n            onSquareRightClick={handleSquareRightClick}\r\n            onDragOverSquare={handleDragOverSquare}\r\n            squareStyles={squareStyles}\r\n            dropSquareStyle={dropSquareStyle}\r\n            boardStyle={{\r\n              borderRadius: \"5px\",\r\n              boxShadow: `0 5px 15px rgba(0, 0, 0, 0.5)`,\r\n            }}\r\n          />\r\n\r\n          <div className=\"myButtons\">\r\n            <Button>Resign</Button>\r\n            <Button>Offer draw</Button>\r\n            <Button>Save game</Button>\r\n          </div>\r\n\r\n          <MyMoves moves={moves} turn={turn}></MyMoves>\r\n        </div>\r\n      )}\r\n    </HumanVsHuman>\r\n  );\r\n}\r\n\r\n// Square styling.\r\nconst squareStyling = ({ pieceSquare, history }) => {\r\n  const sourceSquare = history.length && history[history.length - 1].from;\r\n  const targetSquare = history.length && history[history.length - 1].to;\r\n\r\n  return {\r\n    [pieceSquare]: { backgroundColor: \"rgba(255, 255, 0, 0.4)\" },\r\n    ...(history.length && {\r\n      [sourceSquare]: {\r\n        backgroundColor: \"rgba(255, 255, 0, 0.4)\",\r\n      },\r\n    }),\r\n    ...(history.length && {\r\n      [targetSquare]: {\r\n        backgroundColor: \"rgba(255, 255, 0, 0.4)\",\r\n      },\r\n    }),\r\n  };\r\n};\r\n\r\nexport default MyHumanBoard;\r\n","import React from \"react\";\r\nimport MyEngineBoard from \"../chess/MyEngineBoard\";\r\nimport MyHumanBoard from \"../chess/MyHumanBoard\";\r\n\r\nfunction PrivateGame(props) {\r\n  console.log(props);\r\n  return props.match.path === \"/stockfish\" ? (\r\n    <MyEngineBoard />\r\n  ) : (\r\n    <MyHumanBoard {...props} />\r\n  );\r\n}\r\n\r\nexport default PrivateGame;\r\n","// Setup.\r\nimport React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Switch, Route, withRouter } from \"react-router-dom\";\r\nimport { API_URL } from \"../config\";\r\n\r\n// Styles.\r\nimport \"../styles/App.css\";\r\n\r\n// Components\r\nimport MyNavbar from \"./MyNavbar\";\r\nimport Signin from \"./auth/Signin\";\r\nimport Signup from \"./auth/Signup\";\r\nimport PrivateProfile from \"./user/PrivateProfile\";\r\nimport PublicHome from \"./home/PublicHome\";\r\nimport PrivateHome from \"./home/PrivateHome\";\r\nimport PrivateGame from \"./game/PrivateGame\";\r\n\r\n/* ---------- App. ---------- */\r\nfunction App() {\r\n  const [loggedUser, setLoggedUser] = useState(null);\r\n  const [errorMsg, setErrorMsg] = useState(null);\r\n\r\n  // componentDidMount.\r\n  useEffect(() => {\r\n    if (!loggedUser) {\r\n      axios.get(`${API_URL}/user`, { withCredentials: true }).then((res) => {\r\n        setLoggedUser(res.data);\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // Sign up.\r\n  const handleSignup = (e) => {\r\n    e.preventDefault();\r\n\r\n    const { username, email, password } = e.target;\r\n\r\n    axios\r\n      .post(\r\n        `${API_URL}/signup`,\r\n        {\r\n          username: username.value,\r\n          email: email.value,\r\n          password: password.value,\r\n        },\r\n        { withCredentials: true }\r\n      )\r\n      .then((res) => {\r\n        setLoggedUser(res.data, () => {\r\n          props.history.push(\"/\");\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        setErrorMsg(err.response.data.error);\r\n      });\r\n  };\r\n\r\n  // Sign in.\r\n  const handleSignin = (e) => {\r\n    e.preventDefault();\r\n\r\n    const { email, password } = e.target;\r\n\r\n    axios\r\n      .post(\r\n        `${API_URL}/signin`,\r\n        {\r\n          email: email.value,\r\n          password: password.value,\r\n        },\r\n        { withCredentials: true }\r\n      )\r\n      .then((res) => {\r\n        setLoggedUser(res.data, () => {\r\n          props.history.push(\"/\");\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        setErrorMsg(err.response.data.error);\r\n      });\r\n  };\r\n\r\n  // Log out.\r\n  const handleLogout = (e) => {\r\n    axios.post(`${API_URL}/logout`, {}, { withCredentials: true }).then(() => {\r\n      setLoggedUser(null);\r\n    });\r\n  };\r\n\r\n  // Unmounts `errorMsg`.\r\n  const handleUnmount = () => {\r\n    setErrorMsg(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"myApp\">\r\n      <header>\r\n        <MyNavbar loggedUser={loggedUser} onLogout={handleLogout} />\r\n      </header>\r\n\r\n      <main>\r\n        <Switch>\r\n          {/* Public or Private homepage. */}\r\n          <Route\r\n            exact\r\n            path=\"/\"\r\n            render={() => {\r\n              return !loggedUser ? <PublicHome /> : <PrivateHome />;\r\n            }}\r\n          />\r\n\r\n          {/* Sign in. */}\r\n          <Route\r\n            path=\"/signin\"\r\n            render={(routeProps) => {\r\n              return (\r\n                <Signin\r\n                  onUnmount={handleUnmount}\r\n                  errorMsg={errorMsg}\r\n                  onSignin={handleSignin}\r\n                  {...routeProps}\r\n                />\r\n              );\r\n            }}\r\n          />\r\n\r\n          {/* Sign up. */}\r\n          <Route\r\n            path=\"/signup\"\r\n            render={(routeProps) => {\r\n              return <Signup onSignup={handleSignup} {...routeProps} />;\r\n            }}\r\n          />\r\n\r\n          {/* Private profile. */}\r\n          <Route\r\n            path=\"/private\"\r\n            render={() => {\r\n              return <PrivateProfile loggedUser={loggedUser} />;\r\n            }}\r\n          />\r\n\r\n          {/* Public profile. */}\r\n          <Route\r\n            path=\"/public/:id\"\r\n            render={() => {\r\n              return <PrivateProfile loggedUser={loggedUser} />;\r\n            }}\r\n          />\r\n\r\n          {/* Private game. */}\r\n          <Route\r\n            path=\"/stockfish\"\r\n            render={(routeProps) => {\r\n              return <PrivateGame loggedUser={loggedUser} {...routeProps} />;\r\n            }}\r\n          />\r\n\r\n          <Route\r\n            exact\r\n            path=\"/game/:id/:color\"\r\n            render={(routeProps) => {\r\n              return <PrivateGame loggedUser={loggedUser} {...routeProps} />;\r\n            }}\r\n          />\r\n        </Switch>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(App);\r\n","// Setup.\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport App from \"./components/App\";\r\n\r\n// Styles.\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./index.css\";\r\n\r\n// Rendering function.\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <React.StrictMode>\r\n      <App />\r\n    </React.StrictMode>\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}